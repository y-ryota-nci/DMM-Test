#テンプレートファイル名をキーにメールテンプレートのヘッダを抽出
ML0000_01: |+
 select
  /* ML0000_01 */
  F.MAIL_TEMPLATE_FILE_ID, F.MAIL_TEMPLATE_FILENAME, nvl(M.VAL, F.REMARKS) as REMARKS
  , H.MAIL_TEMPLATE_HEADER_ID, H.CORPORATION_CODE, H.SEND_TO, H.SEND_CC
  , H.SEND_BCC, H.SEND_FROM, H.SEND_FROM_PERSONAL, H.RETURN_TO, H.VERSION, H.DELETE_FLAG
  , H.CORPORATION_CODE_CREATED, H.USER_CODE_CREATED, H.TIMESTAMP_CREATED
  , H.CORPORATION_CODE_UPDATED, H.USER_CODE_UPDATED, H.TIMESTAMP_UPDATED
 from
  MWM_MAIL_TEMPLATE_FILE F
  inner join MWM_MAIL_TEMPLATE_HEADER H
   on H.MAIL_TEMPLATE_FILE_ID = F.MAIL_TEMPLATE_FILE_ID
   and H.DELETE_FLAG = '0'
   and H.CORPORATION_CODE = ?
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_MAIL_TEMPLATE_FILE'
   and M.ID = F.MAIL_TEMPLATE_FILE_ID
   and M.COLUMN_NAME = 'REMARKS'
   and M.LOCALE_CODE = ?
   and M.DELETE_FLAG = '0'
 where
  F.DELETE_FLAG = '0'
  and F.MAIL_TEMPLATE_FILENAME = ?

#メール本文を抽出
ML0000_02: |+
 select /* ML0000_02 */ B.*
 from MWM_MAIL_TEMPLATE_BODY B
 where B.DELETE_FLAG = '0' and B.MAIL_TEMPLATE_HEADER_ID = ?
 order by B.MAIL_TEMPLATE_HEADER_ID, B.LOCALE_CODE

#業務管理項目マスタ
ML0000_03: |+
 select /* ML0000_03 */ *
 from MWM_BUSINESS_INFO_NAME
 where DELETE_FLAG = '0' and VALID_FLAG = '1' and CORPORATION_CODE = ?
 order by CORPORATION_CODE, BUSINESS_INFO_CODE

#メールテンプレート一覧を抽出
ML0010_01: |+
 select /* ML0010_01 */ {SELECT}
 from
  MWM_MAIL_TEMPLATE_FILE F
  inner join WFM_LOCALE L
   on L.LOCALE_CODE = ?
  left join MWM_MAIL_TEMPLATE_HEADER H
   on H.MAIL_TEMPLATE_FILE_ID = F.MAIL_TEMPLATE_FILE_ID
   and H.CORPORATION_CODE = ?
   and H.DELETE_FLAG = '0'
  left join MWM_MAIL_TEMPLATE_BODY B
   on B.MAIL_TEMPLATE_HEADER_ID = H.MAIL_TEMPLATE_HEADER_ID
   and B.LOCALE_CODE = L.LOCALE_CODE
   and B.DELETE_FLAG = '0'
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_MAIL_TEMPLATE_FILE'
   and M.ID = F.MAIL_TEMPLATE_FILE_ID
   and M.COLUMN_NAME = 'REMARKS'
   and M.LOCALE_CODE = L.LOCALE_CODE
   and M.DELETE_FLAG = '0'
 where
  F.DELETE_FLAG = '0'

#メールテンプレート一覧のSELECT句
ML0010_02: |+
  F.MAIL_TEMPLATE_FILE_ID, F.MAIL_TEMPLATE_FILENAME, nvl(M.VAL, F.REMARKS) as REMARKS
  , H.MAIL_TEMPLATE_HEADER_ID, H.CORPORATION_CODE, H.SEND_CC, H.SEND_BCC
  , H.SEND_FROM_PERSONAL, H.SEND_FROM, H.VERSION
  , B.MAIL_SUBJECT, B.MAIL_BODY


#メールテンプレートヘッダの抽出
ML0010_03: |+
 select /* ML0010_03 */ *
 from MWM_MAIL_TEMPLATE_HEADER
 where CORPORATION_CODE = ?
 order by MAIL_TEMPLATE_HEADER_ID

#メールテンプレート本文の抽出
ML0010_04: |+
 select /* ML0010_04 */ *
 from MWM_MAIL_TEMPLATE_BODY
 where MAIL_TEMPLATE_HEADER_ID in (
  select MAIL_TEMPLATE_HEADER_ID
  from MWM_MAIL_TEMPLATE_HEADER
  where CORPORATION_CODE = ?
 )
 order by MAIL_TEMPLATE_BODY_ID

#メールテンプレートファイルの抽出
ML0010_05: |+
 select /* ML0010_05 */ *
 from MWM_MAIL_TEMPLATE_FILE
 order by MAIL_TEMPLATE_FILE_ID

#業務管理項目マスタを抽出
ML0010_06: |+
 select /* ML0010_06 */ * from MWM_BUSINESS_INFO_NAME
 where CORPORATION_CODE = ?
 order by SORT_ORDER, BUSINESS_INFO_NAME_ID

#多言語対応マスタを抽出
ML0010_07: |+
 select /* ML0010_07 */ *
 from MWM_MULTILINGUAL
 where TABLE_NAME = ? and DELETE_FLAG = '0' and ID in (
  select {PK_COL_NAME} from {FILTER_TABLE_NAME} where {FILTER_BY_PK}
 )
 order by MULTILINGUAL_ID

#メール変数マスタ
ML0010_08: |+
 select /* ML0010_08 */
  V.MAIL_VARIABLE_ID, V.CORPORATION_CODE, V.MAIL_VARIABLE_CODE
  , nvl(M1.VAL, V.MAIL_VARIABLE_LABEL) as MAIL_VARIABLE_LABEL
  , nvl(M.VAL, V.MAIL_VARIABLE_VALUE) as MAIL_VARIABLE_VALUE
  , V.VERSION, V.DELETE_FLAG, V.CORPORATION_CODE_CREATED, V.USER_CODE_CREATED
  , V.TIMESTAMP_CREATED, V.CORPORATION_CODE_UPDATED, V.USER_CODE_UPDATED
  , V.TIMESTAMP_UPDATED
 from MWM_MAIL_VARIABLE V
  inner join WFM_LOCALE L
   on L.LOCALE_CODE = ?
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_MAIL_VARIABLE'
   and M.COLUMN_NAME = 'MAIL_VARIABLE_VALUE'
   and M.ID = V.MAIL_VARIABLE_ID
   and M.LOCALE_CODE = L.LOCALE_CODE
   and M.DELETE_FLAG = '0'
  left join MWM_MULTILINGUAL M1
   on M1.TABLE_NAME = 'MWM_MAIL_VARIABLE'
   and M1.COLUMN_NAME = 'MAIL_VARIABLE_LABEL'
   and M1.ID = V.MAIL_VARIABLE_ID
   and M1.LOCALE_CODE = L.LOCALE_CODE
   and M1.DELETE_FLAG = '0'
 where
  V.CORPORATION_CODE = ?
 order by
  V.MAIL_VARIABLE_CODE, V.MAIL_VARIABLE_ID

#メールテンプレートヘッダを抽出
ML0011_01: |+
 select
  /* ML0011_01 */
  F.MAIL_TEMPLATE_FILE_ID, F.MAIL_TEMPLATE_FILENAME, F.VERSION as MAIL_TEMPLATE_FILE_VERSION
  , nvl(M.VAL, F.REMARKS) as REMARKS
  , H.MAIL_TEMPLATE_HEADER_ID, H.CORPORATION_CODE, H.SEND_TO, H.SEND_CC
  , H.SEND_BCC, H.SEND_FROM, H.SEND_FROM_PERSONAL, H.RETURN_TO, H.VERSION, H.DELETE_FLAG
  , H.CORPORATION_CODE_CREATED, H.USER_CODE_CREATED, H.TIMESTAMP_CREATED
  , H.CORPORATION_CODE_UPDATED, H.USER_CODE_UPDATED, H.TIMESTAMP_UPDATED
 from
  MWM_MAIL_TEMPLATE_FILE F
  left join MWM_MAIL_TEMPLATE_HEADER H
   on H.MAIL_TEMPLATE_FILE_ID = F.MAIL_TEMPLATE_FILE_ID
   and H.CORPORATION_CODE = ?
   and H.DELETE_FLAG = '0'
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_MAIL_TEMPLATE_FILE'
   and M.ID = F.MAIL_TEMPLATE_FILE_ID
   and M.COLUMN_NAME = 'REMARKS'
   and M.LOCALE_CODE = ?
   and M.DELETE_FLAG = '0'
 where
  F.DELETE_FLAG = '0'
  and F.MAIL_TEMPLATE_FILE_ID = ?


#メールテンプレート本文を抽出
ML0011_02: |+
 select /* ML0011_02 */ B.*
 from MWM_MAIL_TEMPLATE_BODY B
 where B.DELETE_FLAG = '0' and B.MAIL_TEMPLATE_HEADER_ID = ?
 order by B.MAIL_TEMPLATE_HEADER_ID, B.LOCALE_CODE

#メール変数の選択肢として業務管理項目名称マスタ一覧
ML0011_03: |+
 select /* ML0011_03 */
  B.BUSINESS_INFO_NAME_ID, B.CORPORATION_CODE, B.BUSINESS_INFO_CODE
  , nvl(M.VAL, B.BUSINESS_INFO_NAME) as BUSINESS_INFO_NAME
  , B.BUSINESS_INFO_TYPE, B.VALID_FLAG, B.VERSION, B.DELETE_FLAG
 from MWM_BUSINESS_INFO_NAME B
  inner join WFM_LOCALE L
   on L.LOCALE_CODE = ?
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_BUSINESS_INFO_NAME'
   and M.ID = B.BUSINESS_INFO_NAME_ID
   and M.COLUMN_NAME = 'BUSINESS_INFO_NAME'
   and M.LOCALE_CODE = L.LOCALE_CODE
 where
  B.VALID_FLAG = '1'
  and B.DELETE_FLAG = '0'
  and B.CORPORATION_CODE = ?
 order by
  BUSINESS_INFO_CODE

#メールテンプレート本文マスタを抽出
ML0011_04: |+
 select /* ML0011_04 */ *
 from MWM_MAIL_TEMPLATE_BODY
 where MAIL_TEMPLATE_HEADER_ID = ?

#メール環境マスタを抽出
ML0020_01: |+
 select /* ML0020_01 */
  C.MAIL_CONFIG_ID, C.CONFIG_NAME, C.CONFIG_CODE, C.CONFIG_VALUE, C.SORT_ORDER
  , nvl(M.VAL, C.REMARKS) as REMARKS, C.VERSION, C.DELETE_FLAG
 from MWM_MAIL_CONFIG C
  left join MWM_MULTILINGUAL M
   on M.TABLE_NAME = 'MWM_MAIL_CONFIG'
   and M.ID = C.MAIL_CONFIG_ID
   and M.COLUMN_NAME = 'REMARKS'
   and M.DELETE_FLAG = '0'
 where
  C.DELETE_FLAG = '0'
 order by C.SORT_ORDER, C.MAIL_CONFIG_ID

ML0030_01: |+
 select /* ML0030_01 */ * from MWM_MAIL_TEMPLATE_HEADER
 where MAIL_TEMPLATE_FILE_ID = ?
 order by MAIL_TEMPLATE_HEADER_ID

ML0030_02: |+
 select /* ML0030_02 */ * from MWM_MAIL_TEMPLATE_BODY
 where MAIL_TEMPLATE_HEADER_ID = ?
 order by MAIL_TEMPLATE_BODY_ID

#メールテンプレートファイル名がすでに登録済みか
ML0030_03: |+
 select /* ML0030_03 */ count(*) from MWM_MAIL_TEMPLATE_FILE F
 where MAIL_TEMPLATE_FILENAME = ? and MAIL_TEMPLATE_FILE_ID != ?
